(function (evolv, client, context, collect, mutate) {
  evolv.javascript = evolv.javascript || {};
  evolv.javascript.variants = evolv.javascript.variants || {};
  evolv.javascript.variants["evolv_web_xrkh0xgdt_559pymba9"] = function (resolve, reject) {
  };
  evolv.javascript.variants["evolv_web_xrkh0xgdt_559pymba9"].timing = "immediate";
  evolv.javascript.variants["evolv_web_xrkh0xgdt"] = function (resolve, reject) {
  };
  (function () {
    const fn = (function(){"use strict";function e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function n(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(e){r(n,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}))}return n}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,n,t){return(n=(function(e){var n=(function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)})(e,"string");return"symbol"==typeof n?n:String(n)})(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){if(null==e)return{};var t,r,o=(function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o})(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function i(e,n){return(function(e){if(Array.isArray(e))return e})(e)||(function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,u,a=[],c=!0,s=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(a.push(r.value),a.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(s)throw o}}return a}})(e,n)||a(e,n)||(function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function u(e){return(function(e){if(Array.isArray(e))return c(e)})(e)||(function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)})(e)||a(e)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function a(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function s(e,i,u){var a=u-1;if(u<=0)return e;if(Array.isArray(e))return e.map((function(e){return s(e,i,u)}));if("object"!=t(e))return e;var c=e.macro,l=o(e,["macro"]),f=Object.keys(l).reduce((function(t,o){return n(n({},t),{},r({},o,s(e[o],i,a)))}),{});return c?n(n({},i[c]),f):f}function l(e){var t=(function(e){return e.apply.reduce((function(e,t){var r=t.defmacros;return r?n(n({},e),r):e}),{})})(e);return 0===Object.keys(t).length?e:s(e,t,3)}function f(e){return l((function(e){var t=Object.keys(e).filter((function(e){return/^_/.test(e)}));if(t.length>0){var o=Object.keys(e).filter((function(e){return!/^_/.test(e)})).reduce((function(t,o){return n(n({},t),{},r({},o,e[o]))}),{});return{apply:t.reduce((function(n,t){return[].concat(u(n),[e[t]])}),[o])}}return e})(e))}function p(e){window.evolv.metrics.executed.push(e)}function v(e){var n,t;window.evolv.metrics.warnings=(null===(n=window.evolv)||void 0===n||null===(t=n.metrics)||void 0===t?void 0:t.warnings)||[],window.evolv.metrics.warnings.push(e)}var d={};var m=["source"];var y={join:function(e,n,t,r){var o=e[n];if(o){var i=r||"|";return o.map((function(e){return x.getExpressionValue(t,e)})).filter((function(e){return e})).join(i)}},values:function(e,n,t,r){var o=e[n];return o?{values:Object.values(o)}:null},at:function(e,n,t,r){var o=Array.from(e[n]);return o?x.getExpressionValue(t,o.at(r)):null},sum:function(e,n,t){var r=e[n];if(r)return r.reduce((function(e,n){return e+(x.getExpressionValue(t,n)||0)}),0)},count:function(e,n,t){var r=e[n];if(r)return r.reduce((function(e,n){return e+(x.getExpressionValue(t,n)?1:0)}),0)},promise:function(e,n,t,r){var o=e[n];if(o){var i=function(e){return e},u=r||"then";return function(n,t){"then"===u?o.apply(e,[n]).then(t).catch(i):o.apply(e,[n]).then(i).catch(t)}}}};function g(e){return Array.isArray(e)?e:e.split(".")}function w(e){var n=e.indexOf("(");if(n<=0)return{name:e};var t=e.indexOf(")"),r=e.slice(n+1,t);return{name:e.slice(0,n),param:r}}var h={is:function(e,n){return e.indexOf(":")>0},process:function(e,n,t){var r=i(e.split(":"),3),o=r[0],u=r[1],a=r[2],c=w(u),s=y[c.name];try{if(a){var l=w(a);return(0,y[l.name])(s(n,o,t,c.param),c.name,t,l.param)}return s(n,o,t,c.param)}catch(e){return}}},b={is:function(e,n){return e.indexOf("(")>0},process:function(e,n,t){var r=e.indexOf("(");if(!(r<=0))try{var o=e.indexOf(")"),i=e.slice(r+1,o),u=n[e=e.slice(0,r)];return"function"==typeof u?u.apply(n,[i]):void 0}catch(e){return}}},x={getExpressionValue:function(e,n){var t=g(e),r=n||window;for("window"===t[0]&&(t=t.slice(1));t.length>0&&r;){var o=t[0];if(t=t.slice(1),h.is(o,t))r=h.process(o,r,t),t=[];else if(b.is(o,t))r=b.process(o,r,t);else{var i=r;"function"==typeof(r=r[o])&&(r=r.bind(i))}}return r},setExpressionValue:function(e,n,t){var r=g(e),o=r.pop(),i=x.getExpressionValue(r);i&&(t?i[o]+=n:i[o]=n)},getFetchValue:function(e){return fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({})}).then((function(e){return e.json()})).then((function(e){return e.data}))},getCookieValue:function(e){var n=document.cookie.split(";").find((function(n){return n.trim().split("=")[0]===e}));return n?n.split("=")[1]:null},getLocalStorageValue:function(e){return localStorage.getItem(e)},getSessionStorageValue:function(e){return sessionStorage.getItem(e)},getDomValue:function(e){return document.querySelector(e)&&"found"},getJqDomValue:function(e){return window.$&&$(e).length>0&&"found"},getQueryValue:function(e){try{return new URL(location.href).searchParams.get(e)}catch(e){return null}},getExtensionValue:function(e){if("distribution"===e)return Math.floor(100*Math.random());v({name:e,message:"No audience extension called"})}},E={session:window.sessionStorage,local:window.localStorage,default:window.sessionStorage};function O(e){return"".concat("evolv:").concat(e.key)}function S(e){return E[e.type||"default"]}function j(e,n,t){S(e).setItem(O(e),(function(e,n){switch(e){case"float":case"int":case"number":case"boolean":return n;case"array":return JSON.stringify(n);default:return n.toString()}})(n,t))}function k(e,n){return(function(e,n){if(null===n)return null;switch(e){case"float":return parseFloat(n);case"int":return parseInt(n);case"number":return Number(n);case"boolean":return/^true$/i.test(n);case"array":return JSON.parse(n);default:return n.toString()}})(n,S(e).getItem(O(e)))}function V(e,n){var t=n.storage,r=n.type||"string";if(!(function(e){return!!e.key||(v({storage:e,message:"No key for storage"}),!1)})(t))return e;var o=k(t,r),i=(function(e,n,t,r){if(null===r)return t;var o=e.resolveWith;if("array"===n)switch("string"==typeof r&&(r=JSON.parse(r)),o){case"cached":return r;case"new":return t;default:return u(new Set([].concat(u(r),u(t))))}else if("number"===n)switch(o){case"max":return Math.max(r,t);case"min":return Math.min(r,t);case"sum":return r+t;case"cached":return r;default:return t}else{if("boolean"!==n)return"cached"===o?r:t;switch(o){case"or":return r||t;case"and":return r&&t;case"cached":return r;default:return t}}})(t,r,e,o);return o!==i&&j(t,r,i),i}function A(e){return"string"==typeof e?e.replace(/[^0-9\.]/g,""):e}function P(e,n){switch(n){case"float":return parseFloat(A(e));case"int":return parseInt(A(e));case"number":return Number(A(e));case"boolean":return/^true$/i.test(e);case"array":return e;default:return e.toString()}}function I(e,n){var t=n||(function(e,n){switch(e){case"expression":case"on-async":return x.getExpressionValue(n);case"fetch":return x.getFetchValue(n);case"dom":return x.getDomValue(n);case"jqdom":return x.getJqDomValue(n);case"cookie":return x.getCookieValue(n);case"localStorage":return x.getLocalStorageValue(n);case"sessionStorage":return x.getSessionStorageValue(n);case"query":return x.getQueryValue(n);case"extension":return x.getExtensionValue(n)}return v({metric:{source:e,key:n},message:'source "'.concat(e,'" is invalid')})})(e.source,e.key),r=e.extract,o=e.value;if(r)if(r.attribute){var i,u=null===(i=n)||void 0===i?void 0:i.getAttribute(r.attribute);t=r.parse?u.match(new RegExp(r.parse,"i"))[0]:u}else if(r.expression){if("function"!=typeof t){n="string"==typeof(n=n||t)?JSON.parse(n):n;u=x.getExpressionValue(r.expression,n);t=r.parse?u.match(new RegExp(r.parse,"i"))[0]:u}}else if(r.parse&&"string"==typeof t){var a=new RegExp(r.parse,"i"),c=t.match(a);t=c&&c[0]}else v({metric:e,message:"extract did not include attribute or expression"});return o&&(t=o),e.storage?V(t,e):t}var N=["number","int","float"];function M(e,n,r){if(null==e)return!0;var o=n.value;return null==o&&(o=I(n,r||n.data)),"object"===t(e)?(function(e,n,t){var r=e.operator,o=e.value;if(n=P(n,t),N.includes(t))switch(r){case"<":return n<o;case"<=":return n<=o;case">":return n>o;case">=":return n>=o;default:console.info("evolv metrics: unsupported when operator for number",e)}else{if("string"===t)return new RegExp(o,"i").test(n);console.info("evolv metrics: complex when not operating on numbers",e)}return!1})(e,o,n.type):"string"==typeof e?new RegExp(e,"i").test(o):"boolean"==typeof e||"number"==typeof e?e===o:(console.info("evolv metrics: invalid when",e),!1)}var D=null,T=null;function _(e){return null!=e}function q(){var e=window.evolv.collect.scope("metrics-".concat((new Date).getTime()));D=e.collect,T=e.mutate}function L(){R.forEach((function(e){return clearInterval(e)})),void(R=[]),C.forEach((function(e){return e.revert()})),C=[]}var R=[];function J(e){clearInterval(e),R=R.filter((function(n){return n!==e}))}var C=[],F={};function U(e){var n,t=F[e.key];t||(n=e.tag,t="".concat(n,"-").concat(Q++),F[e.key]=t,D(e.key,t));var r=T(t);return C.push(r),r}var H={iframe:function(e,n,t){U(e).customMutation((function(r,o){if("focus"!==t)return v({metric:e,message:"Listening to iframe:".concat(t," not supported, did you intend iframe:focus")});window.addEventListener("blur",(function(e){document.activeElement==o&&n(null,o)}))}))},scroll:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;window.addEventListener("scroll",(function(){100*(window.scrollY/(document.body.offsetHeight-window.innerHeight))>=Number(t)&&n(null,window)}))},wait:function(e,n){var t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;setTimeout((function(){return n(null,window)}),Math.max(Number(r)-((null===(t=performance)||void 0===t?void 0:t.now())||0),0))}},Q=0;function W(e,n){return{subscribe:function(t){if(M(e.when,n)){var r=I(e);if(_(r))return t(r,null),void 0}if(!(function(e){return e.poll&&"dom"!==e.source&&"query"!==e.source})(e))return _(e.default)&&t(e.default,e.default),void 0;var o=0,i=!1,u=setInterval((function(){try{if(!M(e.when,n))return;var r=I(e);o++,_(r)&&(i=!0,t(r,r),J(u))}catch(n){v({metric:e,error:n,message:"metric processing exception"})}}),e.poll.interval||50);(function(e){R.push(e)})(u),setTimeout((function(){J(u),!i&&e.default&&t(e.default,e.default)}),e.poll.duration||250)}}}var Y={dom:function(e){return{subscribe:function(n){if(e.on){var t=function(e){return e.includes(":")},r=e.on.split(" "),o=r.filter((function(e){return t(e)}));r.filter((function(e){return!t(e)})).forEach((function(t){return U(e).listen(t,(function(e){return n(null,e.target)}))})),o.forEach((function(t){var r=t.split(":"),o=H[r[0]];r.length>=2&&o?o(e,n,r[1]):v({metric:e,message:"event ".concat(t," is an invalid extended event")})}))}else{var i=function(e,t){return n(null,t)};U(e).customMutation(i,i)}}}},onAsync:function(e){return{subscribe:function(n){if(!e.on)return e.data?n(null,e.data):v({metric:e,message:"on-async requires attribute 'on'"});var t=x.getExpressionValue(e.key);if(!t.on||"function"!=typeof t.on)return v({metric:e,message:"on-async object from '${metric.key}' did not have method 'on'"});t.on(e.on,(function(){n(null,{params:arguments})}))}}},expression:function(e,n){var t=W(e,n);return{subscribe:function(n){t.subscribe((function(t){if("function"==typeof t){var r=t;if(!e.on)return e.data?n(null,e.data):v({metric:e,message:"on-async requires attribute 'on'"});function o(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(null,{params:t})}r(e.on,o)}else n(t,t)}))}}}};function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.source;e.key;switch(r){case"dom":return Y.dom(e,t);case"expression":return Y.expression(e,t);case"on-async":return Y.expression(n(n({},e),{},{source:"expression",key:"".concat(e.key,".on")}),t);default:return Y[r]?Y[r](e,t):W(e,t)}}var B=[];function G(e,t){if(M(e.when,t)&&!B.includes(e)){B.push(e);var r=(function(e,t){var r=e.key,i=(e.apply,e.value,e.comment,e.when,o(e,["key","apply","value","comment","when"]));return Object.keys(t).some((function(e){return m.includes(e)}))?n(n({},i),t):n(n({},i),{},{key:r},t)})(t,e);(function(e){window.evolv.metrics.evaluating.push(e)})(r),e.apply?!(function(e,n){return e.key&&e.key!==n.key})(r,t)?(e.data=t.data,K(e.apply,r)):(function(e,n,t){z(n,t).subscribe((function(t,r){n.data=e.data=r;n.on,n.when;var i=o(n,["on","when"]);e.key||(n.key=e.key),K(e.apply,i)}))})(e,r,t):!(function(e){return!!e.source&&"string"==typeof e.source&&!!e.tag&&"string"==typeof e.tag})(r)?e.comment||v({metric:r,message:"Evolv Audience - Metric was incomplete: "}):(function(e,t){"event"===e.action?(function(e,n,t){var r=!1;z(n,t).subscribe((function(t,o){if(!r){r=!0;var i=(function(e,n){var t=/\${([^}]*)}/,r=e.match(/((\${([^}]*)})|([^${}])+)/g);if(!n)return e;var o=function(e,r){var o=r.match(t);return e+(o?x.getExpressionValue(o[1],n):r)}.bind(this);return r.reduce(o,"")})(e,o);setTimeout((function(){return(function(e,n,t){var r=d[e],o=(new Date).getTime();r&&r>o-500||(evolv.client.emit(e),p({tag:e,event:n,context:t}),d[e]=o)})(i,n,o)}),0)}}))})(e.tag,e,t):(function(e,t,r){try{z(t,r).subscribe((function(r,o){null==r&&(r=I(t,o)),null!=r&&(function(e,t,r){var o,i=window.evolv.context;if(r.default===t)o=t;else if(r.map){if(o=(function(e,n){var t,r,o=n.map,i=n.match;function u(e){return e.default||e.value}return"first"===(void 0===i?"first":i)?(r=o.find((function(n){return n.when?new RegExp(n.when,"i").test(e):n.default||n.value})))?u(r):n.default:0===(r=o.filter((function(n){return n.when?new RegExp(n.when,"i").test(e):(t=n,null)}))).length&&t?u(t):1===r.length?u(r[0]):null})(t,r),!(o||r.type&&"string"!==r.type))return}else o=r.combination?(function(e,t){var r=t.combination,o=r.operator,i=r.metric,u=n({source:t.source,key:t.key,type:t.type},i),a=I(u);if("number"!=typeof e||"number"!=typeof a)return v({metric:u,message:"value ".concat(e," or ").concat(a," is not a number")}),void 0;switch(o){case"product":return e*a;case"sum":return e+a;case"min":return Math.min(e,a);case"max":return Math.max(e,a);default:return v({metric:u,message:"operator ".concat(o," for combination, is invalid")}),e}})(t,r):P(t,r.type);i.get(e)!==o&&(i.set(e,o),p({tag:e,bind:r,value:o}))})(e,r,t)}))}catch(n){v({metric:t,tag:e,message:"Unable to add audience for: ".concat(n)})}})(e.tag,e,t)})(r,t)}}function K(e,n){if(!Array.isArray(e))return v({applyList:e,context:n,message:"Evolv Audience warning: Apply list is not array"});e.forEach((function(e){return G(e,n)}))}var X,Z,ee,ne={source:"expression",key:"location.pathname"},te={};X=ee="evolv_metrics_spaChange",window.history.pushState=(Z=window.history.pushState,function(){var e=window.location.href,n=Z.apply(this,arguments);return e!=window.location.href&&window.dispatchEvent(new Event(X)),n}),window.history.replaceState=(function(e){return function(){var n=window.location.href,t=e.apply(this,arguments);return n!=window.location.href&&window.dispatchEvent(new Event(X)),t}})(window.history.replaceState),void window.addEventListener("popstate",(function(){window.dispatchEvent(new Event(X))})),void window.addEventListener(ee,(function(){L(),window.evolv.metrics={executed:[],evaluating:[]},requestAnimationFrame((function(){B=[],void(function e(n){n.data=void 0,(n.apply||[]).forEach(e)})(te),G(te,ne)}))}));var re=function(e){try{if(q(),window.evolv.metrics=window.evolv.metrics||{executed:[],evaluating:[]},!e)return v({json:e,message:"Evolv Audience warning: Apply list is not array"});G(te=f(e),ne)}catch(e){v({error:e,message:"Evolv Audience error: Unable to process config"})}};return{__proto__:null,default:re,__moduleExports:re}})().default;
    fn({"apply":[{"source":"expression","key":"window.performance.now()","type":"number","tag":"performance.evolvStarted"},{"source":"dom","key":"body","tag":"nonbounce","action":"event","on":"wait:1000"}]});
  })();
  (function () {
    const fn = (function(){"use strict";var o=function(){window.evolvTrack=function(o,t){if(!document||!document.body)return console.info("evolvTrack document.body does not exist"),setTimeout((function(){window.evolvTrack(o,t)}),250);var e=document.body.getAttribute("evolv-".concat(o));e?-1===e.indexOf(t)&&document.body.setAttribute("evolv-".concat(o),"".concat(e," ").concat(t)):document.body.setAttribute("evolv-".concat(o),t)}};return{__proto__:null,default:o,__moduleExports:o}})().default;
    fn({});
  })();
  (function () {
    const fn = (function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e})(e):t}function s(e){var t=(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}})();return function(){var n,i=c(e);if(t){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function v(e){return(function(e){if(Array.isArray(e))return d(e)})(e)||(function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)})(e)||(function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)})(e)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")})()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var f=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;e(this,t),this.maxWaitTime=n,this.interval=50}return n(t,[{key:"waitForAnalytics",value:function(){var e=this;if(this.getAnalytics()&&this.isInitilizated())return this.onAnalyticsFound(),void 0;var t=Date.now(),n=setInterval((function(){if(Date.now()-t>e.maxWaitTime)return clearInterval(n),console.log("Evolv: Analytics integration timed out - Couldn't find Analytics"),e.checkAnalyticsProviders(),void 0;e.getAnalytics()&&e.isInitilizated()&&(e.onAnalyticsFound(),clearInterval(n))}),this.interval)}},{key:"getEvolv",value:function(){return window.evolv}},{key:"waitForEvolv",value:function(){var e=this;if(this.getEvolv()&&this.isInitilizated())return this.onEvolvFound(),void 0;var t=Date.now(),n=setInterval((function(){if(Date.now()-t>e.maxWaitTime)return clearInterval(n),console.log("Evolv: Analytics integration timed out - couldn't find Evolv"),void 0;e.getEvolv()&&e.isInitilizated()&&(e.onEvolvFound(),clearInterval(n))}),this.interval)}},{key:"isInitilizated",value:function(){return!0}}]),t})(),y=(function(t){a(r,t);var i=s(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return e(this,r),(t=i.call(this,n)).maxWaitTime=n,t.queue=[],t.interval=50,t.activeCandidateEvents={confirmed:{},contaminated:{}},t.contaminations={},t.waitForAnalytics(),t.waitForEvolv(),t}return n(r,[{key:"onAnalyticsFound",value:function(){for(var e=this.getHandler();this.queue.length;){var t=this.queue.shift();e.apply(void 0,v(t))}}},{key:"onEvolvFound",value:function(){this.configureListeners()}},{key:"configureListeners",value:function(){var e=this;window.evolv.client.on("confirmed",(function(t){e.sendMetricsForActiveCandidates(t)})),window.evolv.client.on("contaminated",(function(t){e.sendMetricsForActiveCandidates(t)})),window.evolv.client.on("event.emitted",(function(t,n){e.sendMetrics(n,{uid:window.evolv.context.uid})}))}},{key:"sendMetricsForActiveCandidates",value:function(e){for(var t=r.getContextKey(e),n=this.getEvolv().context.get(t)||[],i=0;i<n.length;i++){var o;if(this.activeCandidateEvents[e]&&!this.activeCandidateEvents[e][null==n||null===(o=n[i])||void 0===o?void 0:o.cid]){var a=this.lookupFromAllocations(n[i].cid);this.sendMetrics(e,a),this.activeCandidateEvents[e][n[i].cid]=!0}}}},{key:"lookupFromAllocations",value:function(e){for(var t=this.getEvolv().context.get("experiments").allocations,n=0;n<t.length;n++){var i=t[n];if(i.cid===e)return i}}},{key:"getAugmentedOrdinal",value:function(e){if(void 0!==e.ordinal)return"ordinal-"+e.ordinal}},{key:"getDisplayName",value:function(e){if(!e.cid)return new Promise((function(e){return e("")}));var t=e.cid.split(":")[1];return window.evolv.client.getDisplayName("experiments",t)}},{key:"getAugmentedGroupId",value:function(e){if(e.group_id)return"gid-"+e.group_id}},{key:"getAugmentedCidEid",value:function(e){var t;if(e.cid){var n=e.cid.split(":");t="cid-"+n[0]+":eid-"+n[1];var i=n.slice(2).join(":");i&&(t=t+":"+i)}else t="";return t}},{key:"getAugmentedUid",value:function(e){var t="";return e.uid&&(t="uid-"+e.uid),t}},{key:"getAugmentedSid",value:function(){var e="";return window.evolv.context.sid&&(e="sid-"+window.evolv.context.sid),e}},{key:"emit",value:function(){for(var e=this.getAnalytics(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e?this.getHandler().apply(void 0,n):this.queue.push(n)}}],[{key:"getContextKey",value:function(e){switch(e){case"confirmed":return"experiments.confirmations";case"contaminated":return"experiments.contaminations";default:return""}}}]),r})(f),g=(function(t){a(r,t);var i=s(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dataLayer";return e(this,r),(t=i.call(this,n)).maxWaitTime=n,t.dataLayerName=o,t}return n(r,[{key:"getAnalytics",value:function(){return window.google_tag_manager&&window[this.dataLayerName]&&window[this.dataLayerName].findIndex((function(e){return"gtm.load"===e.event}))>-1}},{key:"getHandler",value:function(){return window[this.dataLayerName].push}},{key:"checkAnalyticsProviders",value:function(){var e=!1;window.google_tag_manager||console.log("Evolv: Google Tag Manager not detected."),Object.keys(window.google_tag_manager).forEach((function(t){t.includes("G-")&&(e=!0)})),e||console.log("Evolv: GA4 config not detected. Please ensure you have added a GA4 config tag to your GTM container.")}},{key:"sendMetrics",value:function(e,t){var n=this;this.getDisplayName(t).then((function(i){var r=o(o({},t),{},{type:e,non_interaction:!0});i&&(r.projectName=i);["group_id","eid","cid","ordinal","excluded","type"].forEach((function(e){e in r||(r[e]=void 0)}));window.evolv.context.set("ga_sending",!0),window.evolv.context.set("ga_handler_ready",!!n.getHandler()),n.emit({event:"evolv",evolvEventDetails:o({},r)})}))}}]),r})(y);return{__proto__:null,TagManagerAdapter:g,default:function(e){new g(e.maxWaitTime,e.dataLayerName)}}})().default;
    fn({});
  })();
})(window.evolv, window.evolv.client, window.evolv.context, window.evolv.collect, window.evolv.mutate);

